---
title: "Dependencies"
tbl-colwidths: [30,70]
---

Inspect Flow automatically creates isolated virtual environments for each workflow run, ensuring repeatability and avoiding dependency conflicts with your system Python environment.
Because each run starts with a fresh environment, dependencies must be resolvedâ€”either automatically detected from your project files or explicitly specified in your configuration.

When you run `flow run config.py`, Flow:

1.  Creates a temporary virtual environment with [`uv`](https://github.com/astral-sh/uv)
2.  Installs dependencies from dependency files and/or config file
5.  Executes your evaluations in this isolated environment
6.  Cleans up the temporary environment after completion (logs persist in `log_dir`)

## Specification

The `dependencies` field in `FlowJob` accepts a `FlowDependencies` object:

``` {.python filename="config.py"}
{{< include ../examples/dependencies.py >}}
```

1. How to find dependency files: Defaults to `"auto"` which auto-detects a `requirements.txt` or a `pyproject.toml` file.
May also be set to a path to a dependency file or `"no_file"` to not use a dependency file.
When using `pyproject.toml`, if a `uv.lock` file exists in the same directory, it will be used automatically for reproducible installs.

2. Extra packages beyond the dependency file. Accepts a string or list of strings. Supports: PyPI packages, Git repositories, local packages.

3. Auto-install packages based on task and model names in the config (default: `True`). For example, `model="openai/gpt-4"` installs `openai`, and `name="inspect_evals/mmlu"` installs `inspect-evals`.

## Python Version

Specify the Python version for your job's virtual environment:

``` {.python filename="config.py"}
{{< include ../examples/python_version.py >}}
```

::: callout-tip
### Checking Configuration

To verify which dependencies and Python version will be used:

``` bash
flow config config.py --resolve
```
:::

::: callout-tip
### Repeatability Best Practices

For repeatable workflows:

-   Pin PyPI package versions: `"inspect-evals==0.3.15"`
-   Pin Git commits: `"git+https://github.com/user/repo@commit_hash"`
-   Specify `python_version` explicitly
-   Use `uv.lock` with `pyproject.toml` for locked dependencies (automatically detected if present)
:::